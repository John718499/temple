{"version":3,"file":"static/js/231.61e0fd6a.chunk.js","mappings":"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","sources":["pages/no-match/no-match.js","services/account-service.js","services/firebase-async.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { Loading } from '../../components/loading';\nimport { CurrentUser } from '../../services/account-service';\n\nexport default function NoMatch(props){\n    const navigate = useNavigate();\n\n    useEffect(()=>{\n        const redirect = async () => {\n            const user=await CurrentUser();\n            if(user){\n                navigate('/join')\n            }else{\n                navigate('/login')\n            }\n        }\n        \n        redirect().catch(console.error);\n    })\n\n    return <Loading />\n}","import { getDatabase, ref, set } from 'firebase/database';\nimport { canActivate, getAsync } from './firebase-async';\nimport { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from \"firebase/auth\";\n\nconst auth = getAuth();\nconst db = getDatabase();\n\nexport const CurrentUser = async () => {\n    await canActivate();\n    return auth.currentUser;\n}\n\nexport const RegisterAccount = (email, password, callback, errorCallback) => {\n    createUserWithEmailAndPassword(auth, email, password)\n        .then(AddUser)\n        .then(callback)\n        .catch(errorCallback);\n}\n\nexport const LoginAccount = (email, password, callback, errorCallback) => {\n    signInWithEmailAndPassword(auth, email, password)\n        .then(AddUser)\n        .then(callback)\n        .catch(errorCallback);\n}\n\nexport const Logout = async (callback, errorCallback) => {\n    await canActivate();\n    auth.signOut().then(callback).catch(errorCallback);\n}\n\nexport const AddUser = () => {\n    const currentUser = auth.currentUser;\n    set(ref(db, `users/${currentUser.uid}/email`), currentUser.email);\n}\n\nexport const Auth = async () => {\n    const currentUser = auth.currentUser;\n    await getAsync(ref(db, `users/${currentUser.uid}`))\n        .then((snapshot) => {\n            if (snapshot.exists()) {\n                let userInfo = snapshot.val();\n                localStorage.setItem(\"email\", userInfo.email || false);\n            } else\n                throw new Error('nodata')\n        })\n        .catch(() => localStorage.removeItem(\"email\"))\n\n    await getAsync(ref(db, `isSuperAdmin/${currentUser.uid}`))\n        .then((snapshot) => {\n            if (snapshot.exists())\n                localStorage.setItem(\"isSuperAdmin\", snapshot.val() || false);\n            else\n                throw new Error('nodata')\n        })\n        .catch(() => localStorage.removeItem(\"isSuperAdmin\"))\n\n    await getAsync(ref(db, `isAdmin/${currentUser.uid}`))\n        .then((snapshot) => {\n            if (snapshot.exists())\n                localStorage.setItem(\"isAdmin\", snapshot.val() || false);\n            else\n                throw new Error('nodata')\n        })\n        .catch(() => localStorage.removeItem(\"isAdmin\"))\n\n    await getAsync(ref(db, `isActive/${currentUser.uid}`))\n        .then((snapshot) => {\n            if (snapshot.exists())\n                localStorage.setItem(\"isActive\", snapshot.val() || false);\n            else\n                throw new Error('nodata')\n        })\n        .catch(() => localStorage.removeItem(\"isActive\"))\n}","import { getAuth } from \"firebase/auth\";\nimport { DatabaseReference,DataSnapshot,onValue } from 'firebase/database';\n\nconst auth = getAuth();\n\nexport const canActivate = () => {\n    return new Promise(resolve => {\n        if (auth.currentUser) {\n            resolve(true);\n        } else {\n            const unsubscribe = getAuth().onAuthStateChanged(function (user) {\n                unsubscribe();\n                if (user) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n            });\n        }\n    });\n}\n\nexport const getAsync = (ref: DatabaseReference): Promise<DataSnapshot>=> {\n    return new Promise((resolve, reject) => {\n        function onError(error) {\n            reject(error);\n        } \n\n        function onData(snap) {\n            resolve(snap);\n        }\n  \n        onValue(ref, onData, onError, { onlyOnce: true });\n    });\n}"],"names":["NoMatch","props","navigate","useNavigate","useEffect","redirect","CurrentUser","user","catch","console","error","auth","getAuth","db","getDatabase","canActivate","currentUser","RegisterAccount","email","password","callback","errorCallback","createUserWithEmailAndPassword","then","AddUser","LoginAccount","signInWithEmailAndPassword","Logout","signOut","set","ref","uid","Auth","getAsync","snapshot","exists","Error","userInfo","val","localStorage","setItem","removeItem","Promise","resolve","unsubscribe","onAuthStateChanged","reject","onValue","snap","onlyOnce"],"sourceRoot":""}