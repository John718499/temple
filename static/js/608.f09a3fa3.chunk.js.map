{"version":3,"file":"static/js/608.f09a3fa3.chunk.js","mappings":"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","sources":["components/confirm.js","pages/join/join.js","services/firebase-async.js","services/user-service.js"],"sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Button from \"react-bootstrap/Button\";\nimport { confirmable, createConfirmation } from \"react-confirm\";\n\nconst Confirmation = ({\n  okLabel = \"確定\",\n  cancelLabel = \"取消\",\n  confirmation,\n  show,\n  proceed,\n  enableEscape = true\n}) => {\n  return (\n    <div className=\"static-modal\">\n      <Modal\n        animation={false}\n        show={show}\n        onHide={() => proceed(false)}\n        backdrop={enableEscape ? true : \"static\"}\n        keyboard={enableEscape}\n      >\n        <Modal.Body className=\"my-3\">{confirmation}</Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"light\" onClick={() => proceed(false)}>{cancelLabel}</Button>\n          <Button\n            className=\"button-l\"\n            variant=\"primary\"\n            onClick={() => proceed(true)}\n          >\n            {okLabel}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  );\n};\n\nConfirmation.propTypes = {\n  okLabel: PropTypes.string,\n  cancelLabel: PropTypes.string,\n  confirmation: PropTypes.string,\n  show: PropTypes.bool,\n  proceed: PropTypes.func, // called when ok button is clicked.\n  enableEscape: PropTypes.bool\n};\n\nexport function confirm(\n  confirmation,\n  options = {}\n) {\n  return createConfirmation(confirmable(Confirmation))({\n    confirmation,\n    ...options\n  });\n}\n","import React from 'react';\nimport { Link, useParams, useNavigate } from 'react-router-dom';\nimport { Button, Form, Col } from 'react-bootstrap';\nimport { ActivityInfo, GetJoin, SentJoin, SaveTemplate, LoadTemplate, Today } from '../../services/user-service';\nimport { NotificationManager} from 'react-notifications';\nimport { Loading } from '../../components/loading';\nimport { confirm } from '../../components/confirm';\n\n\nclass Join extends React.Component{\n\n    constructor(props){\n        super(props)\n        this.state={\n            info:null,\n            num:1,\n            validated:false,\n            template:{name:\"\",birthday:\"\",light1:false,light2:false},\n            data:[\n                {name:\"\",birthday:\"\",light1:false,light2:false},\n            ],\n            isAdmin: localStorage.getItem(\"isAdmin\") === 'true',\n            isSuperAdmin: localStorage.getItem(\"isSuperAdmin\") === 'true',\n        }\n    }\n\n    componentDidMount(){\n        ActivityInfo(this.props.id,(result)=>{\n            const today=Today()\n            if(\n                today>result.date &&\n                !this.state.isAdmin &&\n                !this.state.isSuperAdmin\n            ){\n                this.props.navigate('/john')\n            }\n\n            this.setState({info:result})\n        })\n\n        GetJoin(\n            this.props.id,\n            (result)=>{\n                this.setState({data:result,num:result.length})\n            },\n            (error)=>{\n                console.log(error);\n            },\n        )\n    }\n\n    SaveTemplate = async () => {\n        await this.setState({validated:true })\n\n        let joinData=this.state.data.slice(0,this.state.num)\n\n        const isInvalid=joinData.some(e=>{\n            return this.NameInvalid(e.name)\n                    || this.BirthdayInvalid(e.birthday)\n                    || this.LightInvalid(e)\n        });\n        if(isInvalid)return;\n\n        SaveTemplate(\n            joinData,\n            ()=>{\n                NotificationManager.success('成功', '儲存範本', 3000);\n            },\n            (error)=>{\n                NotificationManager.error('錯誤', '儲存範本', 3000);\n            },\n        );\n    }\n\n    LoadTemplate = () => {\n        LoadTemplate(\n            (result)=>{\n                this.setState({data:result,num:result.length})\n                NotificationManager.success('成功', '載入範本', 3000);\n            },\n            (error)=>{\n                switch(error){\n                    case 'nodata':\n                        NotificationManager.error('沒有資料', '載入範本', 3000);\n                        break;\n                    default:\n                        break;\n                }\n            },\n        )\n    }\n\n    CopyToExcelData = () => {\n        const copyString = this.state.data.map(e=>`${e.name}\\t${e.birthday.replace(/-/ig,'/')}\\t${e.light1?'太歲燈\\t':''}${e.light2?'光明燈':''}`).join(\"\\r\\n\");\n\n        navigator.clipboard.writeText(copyString)\n            .then(() => {\n                console.log(\"CopyToExcelData success\")\n            }).catch(err => {\n                console.log('CopyToExcelData error');\n            })\n    }\n\n    convertDate(){\n        let date=new Date(this.state.info.date);\n        return `${date.getFullYear()}年${(date.getMonth()+1).toString().padStart(2, '0')}月${date.getDate()}日`;\n    }\n\n    NumChange=(num)=>{\n        this.setState({num: parseInt(num.target.value)})\n\n        let emptyData=[]\n        let start=this.state.data.length;\n        for(let i=start;i<num.target.value;i++){\n            emptyData.push({name:\"\",birthday:\"\",light1:false,light2:false})\n        }\n\n        this.setState({data:this.state.data.concat(emptyData)})\n    }\n\n    SelectOption(){\n        let num=10;\n\n        if(this.state.isAdmin || this.state.isSuperAdmin)num=Math.max(100,this.state.num+50);\n\n        return Array.from(Array(num).keys()).map(e=>(\n            <option key={e+1} value={e+1}>{e+1}</option>\n        ))\n    }\n\n    ValueChange(prop,value){\n        let index=value.target.getAttribute('data-key');\n        let copydata=this.state.data;\n        copydata[index][prop]=value.target.value;\n\n        this.setState({data:copydata})\n    }\n\n    CheckBoxValueChange(prop,value){\n        let index=value.target.getAttribute('data-key');\n        let copydata=this.state.data;\n        copydata[index][prop]=!copydata[index][prop];\n\n        this.setState({data:copydata})\n    }\n\n    DeleteRowData= async(event)=>{\n        const key=parseInt(event.nativeEvent.target.getAttribute('data-key'));\n        const newRowData=this.state.data.slice(0,key).concat(this.state.data.slice(key+1,this.state.data.length));\n        await this.setState({data:newRowData,num:newRowData.length})\n    }\n\n    NameInvalid(name){\n        return this.state.validated && (name.length<2 || name.length>6);\n    }\n\n    BirthdayInvalid(birthdayStr){\n        let today=new Date();\n        let birthday=new Date(birthdayStr);\n\n        return this.state.validated && (birthdayStr===\"\" || birthday.getTime()>=today.getTime());\n    }\n\n    LightInvalid(data){\n        return this.state.validated && (!data.light1 && !data.light2);\n    }\n\n    dyform(){\n        let content=[]\n\n        for(var i=0;i<this.state.num;i++){\n            content.push(\n                <div key={i} className=\"mb-5 row d-flex\">\n                    <Form.Group className=\"position-relative justify-content-center align-items-center d-flex mb-5 mb-md-0\" as={Col} md=\"4\" controlId={`name${i}`}>\n                        <Form.Control\n                            required\n                            type=\"string\"\n                            data-key={i}\n                            placeholder=\"請輸入姓名\"\n                            value={this.state.data[i].name}\n                            onChange={(name)=>this.ValueChange('name',name)}\n                            onPaste={(event)=>event.stopPropagation()}\n                            isInvalid={this.NameInvalid(this.state.data[i].name)}\n                        />\n                        <Form.Control.Feedback className=\"text-nowrap\" style={{top:\"calc(100% + 5px)\",left:\"12px\"}} type=\"invalid\" tooltip>{this.state.data[i].name===\"\"?\"必填\":\"字數必須介於2到6之間\"}</Form.Control.Feedback>\n                    </Form.Group>\n                    <Form.Group className=\"position-relative justify-content-center align-items-center d-flex mb-5 mb-md-0\" as={Col} md=\"4\" controlId={`name${i}`}>\n                        <label className=\"text-nowrap col-4 col-md-5\">出生年月日</label>\n                        <Form.Control\n                            required\n                            type=\"date\"\n                            data-key={i}\n                            placeholder=\"請選擇出生年月日\"\n                            value={this.state.data[i].birthday}\n                            onChange={(birthday)=>this.ValueChange('birthday',birthday)}\n                            onPaste={this.BirthdayPaste}\n                            isInvalid={this.BirthdayInvalid(this.state.data[i].birthday)}\n                        />\n                        <Form.Control.Feedback className=\"text-nowrap\" style={{top:\"calc(100% + 5px)\",left:\"12px\"}} type=\"invalid\" tooltip>{this.state.data[i].birthday===\"\"?\"必填\":\"請選擇正確出生年月日格式\"}</Form.Control.Feedback>\n                    </Form.Group>\n                    <div className=\"d-flex mb-5 mb-md-0 col-md-4 align-items-center justify-content-between\">\n                        <Form.Group  as={Col} md=\"5\" controlId={`light1${i}`}>\n                            <Form.Check className=\"position-relative\">\n                                <Form.Check.Input\n                                    type=\"checkbox\"\n                                    data-key={i}\n                                    checked={this.state.data[i].light1 || false}\n                                    isInvalid={this.LightInvalid(this.state.data[i])}\n                                    onChange={(light1)=>this.CheckBoxValueChange('light1',light1)}\n                                />\n                                <Form.Check.Label>太歲燈</Form.Check.Label>\n                                <Form.Control.Feedback className=\"text-nowrap\" style={{top:\"calc(100% + 5px)\",left:\"0\"}} type=\"invalid\" tooltip>必選1個</Form.Control.Feedback>\n                            </Form.Check>\n                        </Form.Group>\n                        <Form.Group  as={Col} md=\"5\" controlId={`light2${i}`}>\n                            <Form.Check>\n                                <Form.Check.Input  \n                                    type=\"checkbox\"\n                                    data-key={i}\n                                    checked={this.state.data[i].light2 || false}\n                                    isInvalid={this.LightInvalid(this.state.data[i])}\n                                    onChange={(light2)=>this.CheckBoxValueChange('light2',light2)}\n                                />\n                                <Form.Check.Label>光明燈</Form.Check.Label>\n                            </Form.Check>\n                        </Form.Group>\n                        <button className=\"border-0 bg-transparent\" onClick={this.DeleteRowData} disabled={this.state.num===1}>\n                            <i data-key={i} className=\"bi bi-dash-circle col-md-2\"></i>\n                        </button>\n                        \n                    </div>\n                    \n                    <hr className=\"d-block d-md-none\"/>\n                </div>\n            )\n        }\n\n        return content\n    }\n    \n    render(){\n        if(!this.state.info)return (<Loading />)\n\n        return (\n            <Form noValidate onSubmit={this.Certain}>\n                <div className=\"container\" onPaste={this.DataPaste}>\n                    <div className=\"mx-auto shadow rounded mt-5 mb-5\" style={{ maxWidth: '900px', width: '100%', padding: '40px 30px'}}>\n                        <p className=\"fs-2 text-center\">輸入點燈資料</p>\n                        <div className=\"row mb-3\">\n                            <div className=\"col-md-4 my-2 align-self-center\">名稱:{this.state.info.name}</div>\n                            <div className=\"col-md-5 my-2 align-self-center\">截止日期:{this.convertDate()}</div>\n                            <div className=\"col-md-3 my-2 align-self-center\">人數:\n                                <select className=\"form-select w-auto ms-3 d-inline-block\" value={this.state.num} onChange={this.NumChange} >{this.SelectOption()}</select>\n                            </div>\n                            <div className=\"col-md-12 my-2 align-self-center\">\n                                <Button className=\"btn btn-primary me-3\" onClick={this.SaveTemplate}>儲存範本</Button>\n                                <Button className=\"btn btn-primary me-3\" onClick={this.LoadTemplate}>載入範本</Button>\n                                <Button className=\"btn btn-primary\" onClick={this.CopyToExcelData}>複製 Excel 資料</Button>\n                            </div>\n                        </div>\n                        <hr className=\"mb-5\" />\n                        {this.dyform()}\n                        <div className=\"d-flex justify-content-center\">\n                            <Button className=\"me-3 px-4\" type=\"submit\">確認</Button>\n                            <Link className=\"btn btn-danger px-4\" to={'./..'}>取消</Link>\n                        </div>\n                    </div>\n                </div>\n            </Form>\n        )\n    }\n\n\n    Certain = async (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        await this.setState({validated:true })\n\n        let joinData=this.state.data.slice(0,this.state.num)\n\n        const isInvalid=joinData.some(e=>{\n            return this.NameInvalid(e.name)\n                    || this.BirthdayInvalid(e.birthday)\n                    || this.LightInvalid(e)\n        });\n        if(isInvalid)return;\n\n        SentJoin(\n            this.props.id,\n            joinData,\n            ()=>{\n                NotificationManager.success('成功', '送出資料', 3000);\n            },\n            ()=>{\n                NotificationManager.error('錯誤', '送出資料', 3000);\n            },\n        )\n    }\n\n    DataPaste = async (event) => {\n        const pastString= (event.clipboardData || window.clipboardData).getData('Text');\n        \n        if(!await confirm(\"確定貼上資料?\"))return;\n\n        const pastData = pastString.split('\\r\\n').map(e=>e.split('\\t')).filter(e=>e[0]!==\"\"&& e.length!==1);\n        const parseData = pastData.map(data=>{\n            return {\n                name:data[0],\n                birthday:this.ParseDate(data[1]),\n                light1:data.slice(2,4).some(e=>e==='太歲燈'),\n                light2:data.slice(2,4).some(e=>e==='光明燈'),\n            };\n        })\n\n        if(parseData.length === 0){\n            NotificationManager.error('錯誤', '無資料', 3000);\n            return;\n        }\n\n        if(await confirm(\"是否要覆蓋原始資料?\")){\n            this.setState({\n                num:pastData.length,\n                data:parseData,\n            })\n        }else{\n            const lastData = this.state.data.slice(-1)[0];\n            if(this.isDataEmpty(lastData)){\n                this.setState({\n                    num: this.state.num + pastData.length - 1,\n                    data: this.state.data.slice(0,this.state.data.length-1).concat(parseData),\n                })\n            }else{\n                this.setState({\n                    num: this.state.num + pastData.length,\n                    data: this.state.data.concat(parseData),\n                })\n            }\n        }      \n    }\n\n    BirthdayPaste = (event) => {\n        event.stopPropagation();\n        const pastString= (event.clipboardData || window.clipboardData).getData('Text');\n        const index = event.target.getAttribute('data-key');\n\n        let pastObject = this.state.data[index];\n        pastObject.birthday = this.ParseDate(pastString);\n        this.setState({\n            data: this.state.data,\n        })\n    }\n\n    ParseDate = (dateString) => {\n        const jsDate = new Date(dateString);\n        const year = jsDate.getFullYear();\n        const month = (jsDate.getMonth()+1).toString().padStart(2,0);\n        const date = jsDate.getDate().toString().padStart(2,0);\n        if(isNaN(year) || isNaN(month) || isNaN(date))return \"\";\n        return `${year}-${month}-${date}`;\n    }\n\n    isDataEmpty = (data) => {\n        return data.name === \"\"\n        && data.birthday === \"\"\n        && data.light1 === false\n        && data.light2 === false;\n    }\n}\n\nexport default function JoinParam () {\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n    return(\n        <Join id={id} navigate={navigate} />\n    )\n\n}","import { getAuth } from \"firebase/auth\";\nimport { DatabaseReference,DataSnapshot,onValue } from 'firebase/database';\n\nconst auth = getAuth();\n\nexport const canActivate = () => {\n    return new Promise(resolve => {\n        if (auth.currentUser) {\n            resolve(true);\n        } else {\n            const unsubscribe = getAuth().onAuthStateChanged(function (user) {\n                unsubscribe();\n                if (user) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n            });\n        }\n    });\n}\n\nexport const getAsync = (ref: DatabaseReference): Promise<DataSnapshot>=> {\n    return new Promise((resolve, reject) => {\n        function onError(error) {\n            reject(error);\n        } \n\n        function onData(snap) {\n            resolve(snap);\n        }\n  \n        onValue(ref, onData, onError, { onlyOnce: true });\n    });\n}","import {\n  getDatabase,\n  ref,\n  set,\n  get\n} from 'firebase/database';\nimport {\n  canActivate,\n  getAsync\n} from './firebase-async';\nimport {\n  getAuth\n} from \"firebase/auth\";\n\n\n\nconst db = getDatabase();\nconst auth = getAuth();\n\nexport const AllGeneralUser = async (callback) => {\n  let isActives = {};\n  let isAdmins = {};\n  let isSuperAdmins = {};\n\n  await getAsync(ref(db, \"isActive\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isActives = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"isAdmin\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isAdmins = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"isSuperAdmin\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isSuperAdmins = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, `users`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const userData = snapshot.val();\n      const userIds = Object.keys(userData);\n      let userList = [];\n\n      for (let i = 0; i < userIds.length; i++) {\n\n        const oldData = userData[userIds[i]];\n        if (isSuperAdmins[userIds[i]] || isAdmins[userIds[i]]) continue;\n\n        let newData = {\n          Id: userIds[i],\n          email: oldData.email || false,\n          isActive: isActives[userIds[i]] || false,\n          isAdmin: isAdmins[userIds[i]] || false,\n          isChange: false,\n        }\n\n        userList.push(newData);\n      }\n\n      callback(userList);\n    } else {\n      callback([])\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const AllUser = async (callback) => {\n  let isActives = {};\n  let isAdmins = {};\n  let isSuperAdmins = {};\n\n  await getAsync(ref(db, \"isActive\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isActives = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"isAdmin\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isAdmins = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"isSuperAdmin\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isSuperAdmins = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"users\")).then((snapshot) => {\n    if (snapshot.exists()) {\n      const userData = snapshot.val();\n      const userIds = Object.keys(userData);\n      let userList = [];\n\n      for (let i = 0; i < userIds.length; i++) {\n\n        const oldData = userData[userIds[i]];\n        if (isSuperAdmins[userIds[i]]) continue;\n\n        let newData = {\n          Id: userIds[i],\n          email: oldData.email || false,\n          isActive: isActives[userIds[i]] || false,\n          isAdmin: isAdmins[userIds[i]] || false,\n          isChange: false,\n        }\n\n        userList.push(newData);\n      }\n\n      callback(userList);\n    } else {\n      callback([])\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const UpdateAllGeneralUserAuth = (users, callback, errorCallback) => {\n  try {\n    for (let i = 0; i < users.length; i++) {\n      const oldData = users[i];\n      if (oldData.isChange) set(ref(db, `isActive/${oldData.Id}`), oldData.isActive)\n    }\n    callback();\n  } catch (error) {\n    errorCallback(error)\n  }\n}\n\nexport const UpdateAllUserAuth = (users, callback, errorCallback) => {\n  try {\n    for (let i = 0; i < users.length; i++) {\n      const oldData = users[i];\n      if (oldData.isChange) {\n        set(ref(db, `isActive/${oldData.Id}`), oldData.isActive)\n        set(ref(db, `isAdmin/${oldData.Id}`), oldData.isAdmin)\n      }\n    }\n    callback();\n  } catch (error) {\n    errorCallback(error)\n  }\n}\n\nexport const AddActivity = (id, data, callback, errorCallback) => {\n  set(ref(db, `activity/${id}`), {...data,time:new Date().getTime()}).then(_ => callback()).catch(_ => errorCallback());\n}\n\nexport const EditActivity = (id, data, callback, errorCallback) => {\n  set(ref(db, `activity/${id}`), {...data,time:new Date().getTime()}).then(_ => callback()).catch(errorCallback);\n}\n\nexport const ActivityCount = (callback) => {\n  get(ref(db, `activity/`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      callback(Object.keys(snapshot.val()).length);\n    } else {\n      callback(0)\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const JoinActivity = async (callback) => {\n  await canActivate();\n  getAsync(ref(db, `activity`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const originData = snapshot.val().map((e, index) => ({ ...e, date: TimeToISOString(e.date), id: index }));\n      const filterSortData = originData.filter(e => new Date(Today()) <= new Date(e.date)).sort((a, b) => a.date < b.date ? 1 : -1);\n      callback(filterSortData);\n    } else {\n      callback([]);\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const AllActivity = async (callback) => {\n  await canActivate();\n  getAsync(ref(db, `activity`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const originData = snapshot.val().map((e, index) => ({ ...e,date: TimeToISOString(e.date), id: index, }));\n      callback(originData.sort((a, b) => a.date < b.date ? 1 : -1));\n    } else {\n      callback([]);\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const ActivityInfo = (id, callback) => {\n  getAsync(ref(db, `activity/${id}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const data=snapshot.val();\n      callback({\n        name:data.name,\n        date:new Date(data.date).toISOString().split(\"T\")[0],\n      });\n    } else {\n      callback([]);\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const GetJoin = async (id, callback, errorCallback) => {\n  await canActivate();\n\n  const currentUser = auth.currentUser;\n  getAsync(ref(db, `join/${id}/${currentUser.uid}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      callback(snapshot.val());\n    } else {\n      callback(\n        [{\n          name: \"\",\n          birthday: \"\",\n          light1: false,\n          light2: false\n        },]\n      );\n    }\n  }).catch((error) => {\n    errorCallback(error)\n  });\n}\n\nexport const SentJoin = (id, data, callback, errorCallback) => {\n  const currentUser = auth.currentUser;\n  set(ref(db, `join/${id}/${currentUser.uid}`), data).then(_ => callback()).catch(_ => errorCallback());\n}\n\n\nexport const GetAllJoin = async (id, callback, errorCallback) => {\n  await canActivate();\n\n  getAsync(ref(db, `join/${id}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const allOldData = snapshot.val();\n      const dataKey = Object.keys(allOldData);\n\n      let allNewData = [];\n      for (let i = 0; i < dataKey.length; i++) {\n        allNewData = allNewData.concat(allOldData[dataKey[i]]);\n      }\n\n      callback(allNewData);\n    } else {\n      callback(\n        []\n      );\n    }\n  }).catch((error) => {\n    errorCallback(error)\n  });\n}\n\n\nexport const SaveTemplate = async (data, callback, errorCallback) => {\n  await canActivate();\n  const currentUser = auth.currentUser;\n  set(ref(db, `template/${currentUser.uid}`), data).then(_ => callback()).catch(_ => errorCallback());\n}\n\nexport const LoadTemplate = async (callback, errorCallback) => {\n  await canActivate();\n  const currentUser = auth.currentUser;\n  getAsync(ref(db, `template/${currentUser.uid}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      callback(snapshot.val());\n    } else {\n      throw new Error('nodata');\n    }\n  }).catch((error) => {\n    errorCallback(error)\n  });\n}\n\nexport const Today = () => {\n  let today = new Date();\n  return `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate()}`;\n}\n\nexport const TimeToISOString = (time) => {\n  return new Date(time).toISOString().split(\"T\")[0]\n}"],"names":["Confirmation","okLabel","cancelLabel","confirmation","show","proceed","enableEscape","className","Modal","animation","onHide","backdrop","keyboard","Button","variant","onClick","confirm","options","createConfirmation","confirmable","Join","props","SaveTemplate","setState","validated","joinData","state","data","slice","num","some","e","NameInvalid","name","BirthdayInvalid","birthday","LightInvalid","NotificationManager","error","LoadTemplate","result","length","CopyToExcelData","copyString","map","replace","light1","light2","join","navigator","clipboard","writeText","then","console","log","catch","err","NumChange","parseInt","target","value","emptyData","i","push","concat","DeleteRowData","event","key","nativeEvent","getAttribute","newRowData","Certain","preventDefault","stopPropagation","SentJoin","id","DataPaste","pastString","clipboardData","window","getData","pastData","split","filter","parseData","ParseDate","lastData","isDataEmpty","BirthdayPaste","index","dateString","jsDate","Date","year","getFullYear","month","getMonth","toString","padStart","date","getDate","isNaN","info","template","isAdmin","localStorage","getItem","isSuperAdmin","ActivityInfo","this","Today","navigate","GetJoin","Math","max","Array","from","keys","prop","copydata","birthdayStr","today","getTime","content","Form","as","Col","md","controlId","required","type","placeholder","onChange","ValueChange","onPaste","isInvalid","style","top","left","tooltip","checked","CheckBoxValueChange","disabled","noValidate","onSubmit","maxWidth","width","padding","convertDate","SelectOption","dyform","to","React","JoinParam","useParams","useNavigate","auth","getAuth","canActivate","Promise","resolve","currentUser","unsubscribe","onAuthStateChanged","user","getAsync","ref","reject","onValue","snap","onlyOnce","db","getDatabase","AllGeneralUser","callback","isActives","isAdmins","isSuperAdmins","snapshot","exists","val","userData","userIds","Object","userList","oldData","newData","Id","email","isActive","isChange","AllUser","UpdateAllGeneralUserAuth","users","errorCallback","set","UpdateAllUserAuth","AddActivity","time","_","EditActivity","ActivityCount","get","JoinActivity","filterSortData","TimeToISOString","sort","a","b","AllActivity","originData","toISOString","uid","GetAllJoin","allOldData","dataKey","allNewData","Error"],"sourceRoot":""}