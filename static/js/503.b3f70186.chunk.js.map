{"version":3,"file":"static/js/503.b3f70186.chunk.js","mappings":"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","sources":["pages/join/join-list.js","services/firebase-async.js","services/user-service.js"],"sourcesContent":["import React from 'react';\nimport { Link } from \"react-router-dom\";\nimport { AllActivity, JoinActivity } from '../../services/user-service';\nimport { Loading } from '../../components/loading';\n\nclass JoinList extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            activitys: null,\n            isAdmin: localStorage.getItem(\"isAdmin\") === 'true',\n            isSuperAdmin: localStorage.getItem(\"isSuperAdmin\") === 'true',\n            scrollPosition: 0,\n        }\n    }\n\n    componentDidMount() {\n        if (this.state.isAdmin || this.state.isSuperAdmin) {\n            AllActivity((result) => {\n                this.setState({ activitys: result }, () => {\n                    this.RecoverPosition();\n                });\n            })\n        } else {\n            JoinActivity(async (result) => {\n                this.setState({ activitys: result }, () => {\n                    this.RecoverPosition();\n                });\n            })\n        }\n    }\n\n    render() {\n        if (!this.state.activitys) return (<Loading />)\n\n        return (\n            <div className=\"container mt-4\">\n                {this.ListContent()}\n            </div>\n        )\n    }\n\n    RecoverPosition = async () => {\n        const position = localStorage.getItem(\"joinListX\");\n        if (position) {\n            document.getElementsByTagName(\"html\")[0].scrollTop = position;\n            localStorage.removeItem(\"joinListX\");\n        }\n    }\n\n    RecordPosition = () => {\n        localStorage.setItem('joinListX', document.getElementsByTagName(\"html\")[0].scrollTop)\n    }\n\n    ListContent() {\n        let content = [];\n\n        content = this.state.activitys.map((e) => {\n            let adminLink = null;\n            let adminEdit = null;\n\n            if (this.state.isAdmin || this.state.isSuperAdmin) {\n                adminLink = <Link onClick={this.RecordPosition} to={`./../manage/join/${e.id}`}>表單資料</Link>\n                adminEdit=<Link to={`./../edit/${e.id}`}><i className=\"bi bi-pen\"></i></Link>\n            }\n\n            return (\n                <div className=\"row p-3\" key={e.id}>\n                    <div className=\"mx-auto shadow rounded mt-3 mb-3\" style={{ maxWidth: '600px', width: '100%', padding: '40px 30px' }}>\n                        <div className=\"row\">\n                            <div className=\"col-12 mb-3 d-flex align-items-center\">\n                                <h5 className=\"mb-0 me-2\">{e.name}</h5>\n                                {adminEdit}\n                            </div>\n                            <div className=\"col-12 mb-3\">截止日期:{e.date}</div>\n                            <div className=\"col-12\">\n                                <Link className=\"me-3\" onClick={this.RecordPosition} to={`./${e.id}`}>輸入資料</Link>\n                                {adminLink}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        })\n\n        return content;\n    }\n}\n\nexport default JoinList;","import { getAuth } from \"firebase/auth\";\nimport { DatabaseReference,DataSnapshot,onValue } from 'firebase/database';\n\nconst auth = getAuth();\n\nexport const canActivate = () => {\n    return new Promise(resolve => {\n        if (auth.currentUser) {\n            resolve(true);\n        } else {\n            const unsubscribe = getAuth().onAuthStateChanged(function (user) {\n                unsubscribe();\n                if (user) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n            });\n        }\n    });\n}\n\nexport const getAsync = (ref: DatabaseReference): Promise<DataSnapshot>=> {\n    return new Promise((resolve, reject) => {\n        function onError(error) {\n            reject(error);\n        } \n\n        function onData(snap) {\n            resolve(snap);\n        }\n  \n        onValue(ref, onData, onError, { onlyOnce: true });\n    });\n}","import {\n  getDatabase,\n  ref,\n  set,\n  get\n} from 'firebase/database';\nimport {\n  canActivate,\n  getAsync\n} from './firebase-async';\nimport {\n  getAuth\n} from \"firebase/auth\";\n\n\n\nconst db = getDatabase();\nconst auth = getAuth();\n\nexport const AllGeneralUser = async (callback) => {\n  let isActives = {};\n  let isAdmins = {};\n  let isSuperAdmins = {};\n\n  await getAsync(ref(db, \"isActive\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isActives = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"isAdmin\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isAdmins = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"isSuperAdmin\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isSuperAdmins = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, `users`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const userData = snapshot.val();\n      const userIds = Object.keys(userData);\n      let userList = [];\n\n      for (let i = 0; i < userIds.length; i++) {\n\n        const oldData = userData[userIds[i]];\n        if (isSuperAdmins[userIds[i]] || isAdmins[userIds[i]]) continue;\n\n        let newData = {\n          Id: userIds[i],\n          email: oldData.email || false,\n          isActive: isActives[userIds[i]] || false,\n          isAdmin: isAdmins[userIds[i]] || false,\n          isChange: false,\n        }\n\n        userList.push(newData);\n      }\n\n      callback(userList);\n    } else {\n      callback([])\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const AllUser = async (callback) => {\n  let isActives = {};\n  let isAdmins = {};\n  let isSuperAdmins = {};\n\n  await getAsync(ref(db, \"isActive\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isActives = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"isAdmin\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isAdmins = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"isSuperAdmin\")).then((snapshot) => {\n    if (snapshot.exists() && (typeof snapshot.val()) === \"object\") {\n      isSuperAdmins = snapshot.val();\n    }\n  })\n\n  await getAsync(ref(db, \"users\")).then((snapshot) => {\n    if (snapshot.exists()) {\n      const userData = snapshot.val();\n      const userIds = Object.keys(userData);\n      let userList = [];\n\n      for (let i = 0; i < userIds.length; i++) {\n\n        const oldData = userData[userIds[i]];\n        if (isSuperAdmins[userIds[i]]) continue;\n\n        let newData = {\n          Id: userIds[i],\n          email: oldData.email || false,\n          isActive: isActives[userIds[i]] || false,\n          isAdmin: isAdmins[userIds[i]] || false,\n          isChange: false,\n        }\n\n        userList.push(newData);\n      }\n\n      callback(userList);\n    } else {\n      callback([])\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const UpdateAllGeneralUserAuth = (users, callback, errorCallback) => {\n  try {\n    for (let i = 0; i < users.length; i++) {\n      const oldData = users[i];\n      if (oldData.isChange) set(ref(db, `isActive/${oldData.Id}`), oldData.isActive)\n    }\n    callback();\n  } catch (error) {\n    errorCallback(error)\n  }\n}\n\nexport const UpdateAllUserAuth = (users, callback, errorCallback) => {\n  try {\n    for (let i = 0; i < users.length; i++) {\n      const oldData = users[i];\n      if (oldData.isChange) {\n        set(ref(db, `isActive/${oldData.Id}`), oldData.isActive)\n        set(ref(db, `isAdmin/${oldData.Id}`), oldData.isAdmin)\n      }\n    }\n    callback();\n  } catch (error) {\n    errorCallback(error)\n  }\n}\n\nexport const AddActivity = (id, data, callback, errorCallback) => {\n  set(ref(db, `activity/${id}`), {...data,time:new Date().getTime()}).then(_ => callback()).catch(_ => errorCallback());\n}\n\nexport const EditActivity = (id, data, callback, errorCallback) => {\n  set(ref(db, `activity/${id}`), {...data,time:new Date().getTime()}).then(_ => callback()).catch(errorCallback);\n}\n\nexport const ActivityCount = (callback) => {\n  get(ref(db, `activity/`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      callback(Object.keys(snapshot.val()).length);\n    } else {\n      callback(0)\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const JoinActivity = async (callback) => {\n  await canActivate();\n  getAsync(ref(db, `activity`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const originData = snapshot.val().map((e, index) => ({ ...e, date: TimeToISOString(e.date), id: index }));\n      const filterSortData = originData.filter(e => new Date(Today()) <= new Date(e.date)).sort((a, b) => a.date < b.date ? 1 : -1);\n      callback(filterSortData);\n    } else {\n      callback([]);\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const AllActivity = async (callback) => {\n  await canActivate();\n  getAsync(ref(db, `activity`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const originData = snapshot.val().map((e, index) => ({ ...e,date: TimeToISOString(e.date), id: index, }));\n      callback(originData.sort((a, b) => a.date < b.date ? 1 : -1));\n    } else {\n      callback([]);\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const ActivityInfo = (id, callback) => {\n  getAsync(ref(db, `activity/${id}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const data=snapshot.val();\n      callback({\n        name:data.name,\n        date:new Date(data.date).toISOString().split(\"T\")[0],\n      });\n    } else {\n      callback([]);\n    }\n  }).catch((error) => {\n    console.error(error);\n  });\n}\n\nexport const GetJoin = async (id, callback, errorCallback) => {\n  await canActivate();\n\n  const currentUser = auth.currentUser;\n  getAsync(ref(db, `join/${id}/${currentUser.uid}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      callback(snapshot.val());\n    } else {\n      callback(\n        [{\n          name: \"\",\n          birthday: \"\",\n          light1: false,\n          light2: false\n        },]\n      );\n    }\n  }).catch((error) => {\n    errorCallback(error)\n  });\n}\n\nexport const SentJoin = (id, data, callback, errorCallback) => {\n  const currentUser = auth.currentUser;\n  set(ref(db, `join/${id}/${currentUser.uid}`), data).then(_ => callback()).catch(_ => errorCallback());\n}\n\n\nexport const GetAllJoin = async (id, callback, errorCallback) => {\n  await canActivate();\n\n  getAsync(ref(db, `join/${id}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      const allOldData = snapshot.val();\n      const dataKey = Object.keys(allOldData);\n\n      let allNewData = [];\n      for (let i = 0; i < dataKey.length; i++) {\n        allNewData = allNewData.concat(allOldData[dataKey[i]]);\n      }\n\n      callback(allNewData);\n    } else {\n      callback(\n        []\n      );\n    }\n  }).catch((error) => {\n    errorCallback(error)\n  });\n}\n\n\nexport const SaveTemplate = async (data, callback, errorCallback) => {\n  await canActivate();\n  const currentUser = auth.currentUser;\n  set(ref(db, `template/${currentUser.uid}`), data).then(_ => callback()).catch(_ => errorCallback());\n}\n\nexport const LoadTemplate = async (callback, errorCallback) => {\n  await canActivate();\n  const currentUser = auth.currentUser;\n  getAsync(ref(db, `template/${currentUser.uid}`)).then((snapshot) => {\n    if (snapshot.exists()) {\n      callback(snapshot.val());\n    } else {\n      throw new Error('nodata');\n    }\n  }).catch((error) => {\n    errorCallback(error)\n  });\n}\n\nexport const Today = () => {\n  let today = new Date();\n  return `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate()}`;\n}\n\nexport const TimeToISOString = (time) => {\n  return new Date(time).toISOString().split(\"T\")[0]\n}"],"names":["JoinList","props","RecoverPosition","position","localStorage","getItem","document","getElementsByTagName","scrollTop","removeItem","RecordPosition","setItem","state","activitys","isAdmin","isSuperAdmin","scrollPosition","this","AllActivity","result","setState","JoinActivity","className","ListContent","map","e","adminLink","adminEdit","onClick","to","id","style","maxWidth","width","padding","name","date","React","auth","getAuth","canActivate","Promise","resolve","currentUser","unsubscribe","onAuthStateChanged","user","getAsync","ref","reject","onValue","snap","error","onlyOnce","db","getDatabase","AllGeneralUser","callback","isActives","isAdmins","isSuperAdmins","then","snapshot","exists","val","userData","userIds","Object","keys","userList","i","length","oldData","newData","Id","email","isActive","isChange","push","catch","console","AllUser","UpdateAllGeneralUserAuth","users","errorCallback","set","UpdateAllUserAuth","AddActivity","data","time","Date","getTime","_","EditActivity","ActivityCount","get","filterSortData","index","TimeToISOString","filter","Today","sort","a","b","originData","ActivityInfo","toISOString","split","GetJoin","uid","birthday","light1","light2","SentJoin","GetAllJoin","allOldData","dataKey","allNewData","concat","SaveTemplate","LoadTemplate","Error","today","getFullYear","getMonth","toString","padStart","getDate"],"sourceRoot":""}