"use strict";(self.webpackChunktemple=self.webpackChunktemple||[]).push([[718],{4718:function(n,t,e){e.r(t),e.d(t,{default:function(){return x}});var r=e(1413),a=e(4165),i=e(5861),c=e(5671),o=e(3144),s=e(136),u=e(9388),l=e(2791),f=e(3504),h=e(6871),m=e(5481),p=e(4221),d=e(184),v=function(n){(0,s.Z)(e,n);var t=(0,u.Z)(e);function e(n){var r;return(0,c.Z)(this,e),(r=t.call(this,n)).EmailChange=function(n){r.setState({email:n.target.value})},r.PasswordChange=function(n){r.setState({password:n.target.value})},r.LoginClick=function(){(0,m.Cj)(r.state.email,r.state.password,(0,i.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:p.fn.success("\u6210\u529f","\u767b\u5165",3e3),r.props.navigate("/join");case 2:case"end":return n.stop()}}),n)}))),(function(n){console.log(n),p.fn.error("\u5e33\u865f\u6216\u5bc6\u78bc\u932f\u8aa4","\u767b\u5165",3e3)}))},r.state={email:"",password:""},r}return(0,o.Z)(e,[{key:"render",value:function(){return(0,d.jsx)("div",{className:"mx-auto",style:{maxWidth:"330px",width:"100%",padding:"50px 15px 15px 15px"},children:(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"fs-2 text-center",children:"\u767b\u5165"}),(0,d.jsx)("input",{className:"form-control mb-2",type:"email",value:this.state.email,onChange:this.EmailChange,placeholder:"\u8f38\u5165\u60a8\u7684\u96fb\u5b50\u90f5\u4ef6"}),(0,d.jsx)("input",{className:"form-control",type:"password",value:this.state.password,onChange:this.PasswordChange,placeholder:"\u8f38\u5165\u60a8\u7684\u5bc6\u78bc"}),(0,d.jsxs)("div",{className:"mt-3 d-flex justify-content-around",children:[(0,d.jsx)("button",{className:"btn btn-primary me-1 col-6",onClick:this.LoginClick,children:"\u767b\u5165"}),(0,d.jsx)(f.rU,{className:"btn btn-primary col-6",to:"/register",children:"\u8a3b\u518a"})]})]})})}}]),e}(l.Component);function x(n){var t=(0,h.s0)();return(0,d.jsx)(v,(0,r.Z)((0,r.Z)({},n),{},{navigate:t}))}},5481:function(n,t,e){e.d(t,{Cj:function(){return h},Ih:function(){return l},RD:function(){return m},gx:function(){return d},xH:function(){return f}});var r=e(4165),a=e(5861),i=e(408),c=e(6115),o=e(9033),s=(0,o.v0)(),u=(0,i.N8)(),l=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.n)();case 2:return n.abrupt("return",s.currentUser);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),f=function(n,t,e,r){(0,o.Xb)(s,n,t).then(p).then(e).catch(r)},h=function(n,t,e,r){(0,o.e5)(s,n,t).then(p).then(e).catch(r)},m=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t,e){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.n)();case 2:s.signOut().then(t).catch(e);case 3:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),p=function(){var n=s.currentUser;(0,i.t8)((0,i.iH)(u,"users/".concat(n.uid,"/email")),n.email)},d=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=s.currentUser,n.next=3,(0,c.C)((0,i.iH)(u,"users/".concat(t.uid))).then((function(n){if(!n.exists())throw new Error("nodata");var t=n.val();localStorage.setItem("email",t.email||!1)})).catch((function(){return localStorage.removeItem("email")}));case 3:return n.next=5,(0,c.C)((0,i.iH)(u,"isSuperAdmin/".concat(t.uid))).then((function(n){if(!n.exists())throw new Error("nodata");localStorage.setItem("isSuperAdmin",n.val()||!1)})).catch((function(){return localStorage.removeItem("isSuperAdmin")}));case 5:return n.next=7,(0,c.C)((0,i.iH)(u,"isAdmin/".concat(t.uid))).then((function(n){if(!n.exists())throw new Error("nodata");localStorage.setItem("isAdmin",n.val()||!1)})).catch((function(){return localStorage.removeItem("isAdmin")}));case 7:return n.next=9,(0,c.C)((0,i.iH)(u,"isActive/".concat(t.uid))).then((function(n){if(!n.exists())throw new Error("nodata");localStorage.setItem("isActive",n.val()||!1)})).catch((function(){return localStorage.removeItem("isActive")}));case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},6115:function(n,t,e){e.d(t,{C:function(){return o},n:function(){return c}});var r=e(9033),a=e(408),i=(0,r.v0)(),c=function(){return new Promise((function(n){if(i.currentUser)n(!0);else var t=(0,r.v0)().onAuthStateChanged((function(e){t(),n(!!e)}))}))},o=function(n){return new Promise((function(t,e){(0,a.jM)(n,(function(n){t(n)}),(function(n){e(n)}),{onlyOnce:!0})}))}}}]);
//# sourceMappingURL=718.4d009ab3.chunk.js.map